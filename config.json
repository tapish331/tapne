{
  "project": "tapne",
  "strategy": "faithful-to-production",
  "verbose_support": {
    "setup_script": "infra/setup-faithful-local.ps1",
    "switches": [
      "--verbose",
      "-Verbose"
    ],
    "management_commands": [
      "python manage.py bootstrap_accounts --verbose",
      "python manage.py bootstrap_feed --verbose",
      "python manage.py bootstrap_search --verbose",
      "python manage.py bootstrap_trips --verbose --create-missing-hosts",
      "python manage.py bootstrap_blogs --verbose --create-missing-authors",
      "python manage.py bootstrap_social --verbose --create-missing-members"
    ]
  },
  "local_stack": {
    "compose_file": "infra/docker-compose.yml",
    "dockerfile": "infra/Dockerfile.web",
    "env_file": ".env",
    "env_template_file": ".env.example",
    "services": {
      "web": {
        "local_equivalent": "Docker container running gunicorn",
        "production_equivalent": "Google Cloud Run service",
        "port_env": "APP_PORT",
        "cloud_port_env": "PORT"
      },
      "postgres": {
        "local_equivalent": "postgres:16-alpine container",
        "production_equivalent": "Cloud SQL for PostgreSQL",
        "host_port_env": "DB_HOST_PORT"
      },
      "object_storage": {
        "local_equivalent": "MinIO object storage",
        "production_equivalent": "Google Cloud Storage bucket",
        "host_port_env": "MINIO_PORT"
      },
      "cache_queue": {
        "local_equivalent": "Redis container",
        "production_equivalent": "Memorystore for Redis",
        "host_port_env": "REDIS_PORT"
      }
    }
  },
  "ui_shared_assets": {
    "required_template_files": [
      "templates/base.html",
      "templates/partials/modals/login_prompt_modal.html",
      "templates/partials/cards/trip_card.html",
      "templates/partials/cards/user_card.html",
      "templates/partials/cards/blog_card.html",
      "templates/pages/home.html",
      "templates/pages/search.html",
      "templates/pages/trips/list.html",
      "templates/pages/trips/detail.html",
      "templates/pages/trips/form.html",
      "templates/pages/trips/mine.html",
      "templates/pages/blogs/list.html",
      "templates/pages/blogs/detail.html",
      "templates/pages/blogs/form.html",
      "templates/pages/users/profile.html",
      "templates/pages/activity/index.html",
      "templates/pages/settings/index.html",
      "templates/pages/social/bookmarks.html",
      "templates/pages/accounts/me.html",
      "templates/pages/accounts/me_edit.html"
    ],
    "required_static_files": [
      "static/css/tapne.css",
      "static/js/tapne-ui.js"
    ]
  },
  "django_apps": {
    "accounts": {
      "required_files": [
        "accounts/apps.py",
        "accounts/models.py",
        "accounts/forms.py",
        "accounts/validators.py",
        "accounts/views.py",
        "accounts/urls.py",
        "accounts/admin.py",
        "accounts/tests.py",
        "accounts/management/__init__.py",
        "accounts/management/commands/__init__.py",
        "accounts/management/commands/bootstrap_accounts.py",
        "accounts/migrations/__init__.py",
        "accounts/migrations/0001_initial.py"
      ],
      "public_profile_route": "/u/<username>/",
      "member_routes": [
        "/accounts/signup/",
        "/accounts/login/",
        "/accounts/logout/",
        "/accounts/me/",
        "/accounts/me/edit/"
      ]
    },
    "feed": {
      "required_files": [
        "feed/apps.py",
        "feed/models.py",
        "feed/views.py",
        "feed/urls.py",
        "feed/admin.py",
        "feed/tests.py",
        "feed/management/__init__.py",
        "feed/management/commands/__init__.py",
        "feed/management/commands/bootstrap_feed.py",
        "feed/migrations/__init__.py",
        "feed/migrations/0001_initial.py"
      ],
      "home_route": "/",
      "home_modes": [
        "guest-trending",
        "member-personalized"
      ]
    },
    "search": {
      "required_files": [
        "search/apps.py",
        "search/models.py",
        "search/views.py",
        "search/urls.py",
        "search/admin.py",
        "search/tests.py",
        "search/management/__init__.py",
        "search/management/commands/__init__.py",
        "search/management/commands/bootstrap_search.py",
        "search/migrations/__init__.py"
      ],
      "search_route": "/search/",
      "result_types": [
        "all",
        "trips",
        "users",
        "blogs"
      ]
    },
    "trips": {
      "required_files": [
        "trips/apps.py",
        "trips/models.py",
        "trips/forms.py",
        "trips/views.py",
        "trips/urls.py",
        "trips/admin.py",
        "trips/tests.py",
        "trips/management/__init__.py",
        "trips/management/commands/__init__.py",
        "trips/management/commands/bootstrap_trips.py",
        "trips/migrations/__init__.py",
        "trips/migrations/0001_initial.py"
      ],
      "browse_routes": [
        "/trips/",
        "/trips/<trip_id>/"
      ],
      "member_routes": [
        "/trips/create/",
        "/trips/<trip_id>/edit/",
        "/trips/<trip_id>/delete/",
        "/trips/mine/"
      ],
      "mine_tabs": [
        "upcoming",
        "hosting",
        "past",
        "saved"
      ]
    },
    "blogs": {
      "required_files": [
        "blogs/apps.py",
        "blogs/models.py",
        "blogs/forms.py",
        "blogs/views.py",
        "blogs/urls.py",
        "blogs/admin.py",
        "blogs/tests.py",
        "blogs/management/__init__.py",
        "blogs/management/commands/__init__.py",
        "blogs/management/commands/bootstrap_blogs.py",
        "blogs/migrations/__init__.py",
        "blogs/migrations/0001_initial.py"
      ],
      "browse_routes": [
        "/blogs/",
        "/blogs/<slug>/"
      ],
      "member_routes": [
        "/blogs/create/",
        "/blogs/<slug>/edit/",
        "/blogs/<slug>/delete/"
      ]
    },
    "social": {
      "required_files": [
        "social/apps.py",
        "social/models.py",
        "social/views.py",
        "social/urls.py",
        "social/admin.py",
        "social/tests.py",
        "social/management/__init__.py",
        "social/management/commands/__init__.py",
        "social/management/commands/bootstrap_social.py",
        "social/migrations/__init__.py",
        "social/migrations/0001_initial.py"
      ],
      "member_routes": [
        "/social/follow/<username>/",
        "/social/unfollow/<username>/",
        "/social/bookmark/",
        "/social/unbookmark/",
        "/social/bookmarks/"
      ],
      "bookmark_types": [
        "trip",
        "user",
        "blog"
      ]
    }
  },
  "required_env_keys": [
    "APP_ENV",
    "APP_PORT",
    "HOST",
    "SCHEME",
    "SECRET_KEY",
    "STORAGE_BACKEND",
    "DB_NAME",
    "DB_USER",
    "DB_PASSWORD",
    "DB_HOST_PORT",
    "MINIO_PORT",
    "MINIO_CONSOLE_PORT",
    "MINIO_BUCKET",
    "MINIO_ROOT_USER",
    "MINIO_ROOT_PASSWORD",
    "REDIS_PORT",
    "WEB_CONCURRENCY",
    "GUNICORN_TIMEOUT"
  ]
}
